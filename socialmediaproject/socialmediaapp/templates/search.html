{% extends 'base.html' %}

{% block content %}
  <h1>Search Users</h1>
  <form method="GET" action="{% url 'search' %}">
    <div class="form-group">
      <input type="text" name="query" class="form-control" placeholder="Enter user email">
    </div>
    <button type="submit" class="btn btn-primary">Search</button>
  </form>

  {% if query %}
    <h3>Results for "{{ query }}":</h3>
    {% if users %}
      <ul>
        {% for user in users %}
          <li>{{ user.email }} <a href="{% url 'userprofile' user.email %}">View Profile</a> {% if user.id not in following %}<a href="{% url 'user_follow' user.email %}">Follow</a>{% endif %}</li>
        {% endfor %}
      </ul>
    {% else %}
      <p>No users found.</p>
    {% endif %}
  {% endif %}
{% endblock %}
